---
layout: post
title: mashlab 지형 데이타 생성
date: 2018-09-30 23:55:00 +0900
author: 원성규
excerpt: 
categories:
- maps
tags:
- mashlab
- point cloud
- geometry
keywords:
---

## 입력 데이타

입력 데이타는 `경도`, `위도`, `수심`으로 구성되며 단위는 각각 degree, degree, meter이다. 
```
129.7171609069 36.686082735737 -146.40131405619
129.7172728579 36.686082061402 -144.71294125782
129.7173848089 36.686081386962 -142.74252808828
```

`gcs2utmd` 또는 gcs2utm 함수를 사용하여 위경도를 UTM 좌표로 변환한다.
```matlab
[x,y]=gcs2utmd(wgs84_dat(:,[2 1]));
xyz=[x y wgs84_dat(:,3)];
```

수심을 컬러맵에 매핑하여 수심에 따른 색상(`rgb`)을 계산한다. 표기 범위는 `[0 1]`이고 색상 단계는 `64`이다.
```matlab
w=(z-min(z))/(max(z)-min(z));
rgb=interp1(linspace(0,1,64),cmap,w);
```

## 출력 데이타

`xyzrgb` 형식으로 좌표와 색상을 출력한다. 여기서 구분자는 `comma`이다.
```matlab
dlmwrite('point-cloud-meshlab-xyzrgb.txt',xyzrgb,'delimiter',',','precision',14)
```

```
564072.00000039,4060288.9867548,-146.40131405619,0,0,0.60204991852216
564082.00254501,4060288.9867548,-144.71294125782,0,0,0.64931183528276
564092.00508996,4060288.9867548,-142.74252808828,0,0,0.70446879072097
```

